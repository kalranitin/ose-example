{
   "kind":"Template",
   "apiVersion":"v1",
   "metadata":{
      "name":"sample-webapp-template",
      "creationTimestamp":null,
      "annotations":{
         "description":"This example shows how to create a sample webapplication in openshift origin v3"
      }
   },
   "objects":[
      {
         "kind":"Service",
         "apiVersion":"v1",
         "metadata":{
            "name":"${APP_SERVICE_NAME}",
            "creationTimestamp":null
         },
         "spec":{
            "ports":[
               {
                  "name":"sample-webapp-http",
                  "protocol":"TCP",
                  "port":5434,
                  "targetPort":8080,
                  "nodePort":0
               }
            ],
            "selector":{
               "name":"${APP_SERVICE_NAME}"
            },
            "portalIP":"",
            "type":"ClusterIP",
            "sessionAffinity":"None"
         },
         "status":{
            "loadBalancer":{

            }
         }
      },
      {
         "kind":"Route",
         "apiVersion":"v1",
         "metadata":{
            "name":"route-edge",
            "creationTimestamp":null
         },
         "spec":{
            "host":"samplewebapp-prod.com",
            "to":{
               "kind":"Service",
               "name":"${APP_SERVICE_NAME}"
            },
            "port":{
               "targetPort":"sample-webapp-http"
            }
         },
         "status":{

         }
      },
      {
         "kind":"DeploymentConfig",
         "apiVersion":"v1",
         "metadata":{
            "name":"sample-webapp-deployment",
            "creationTimestamp":null
         },
         "spec":{
            "strategy":{
               "type":"Rolling",
               "rollingParams":{
                  "updatePeriodSeconds":1,
                  "intervalSeconds":1,
                  "timeoutSeconds":120
               },
               "resources":{

               }
            },
            "triggers":[
               {
                  "type":"ImageChange",
                  "imageChangeParams":{
                     "automatic":true,
                     "containerNames":[
                        "sample-webapp-container"
                     ],
                     "from":{
                        "kind":"ImageStreamTag",
                        "namespace":"sampleapp",
                        "name":"sample-webapp:promote"
                     },
                     "lastTriggeredImage":""
                  }
               },
               {
                  "type":"ConfigChange"
               }
            ],
            "replicas":1,
            "selector":{
               "name":"${APP_SERVICE_NAME}"
            },
            "template":{
               "metadata":{
                  "creationTimestamp":null,
                  "labels":{
                     "name":"${APP_SERVICE_NAME}"
                  }
               },
               "spec":{
                  "containers":[
                     {
                        "name":"sample-webapp-container",
                        "image":"172.30.240.125:5000/sampleapp/sample-webapp:promote",
                        "ports":[
                           {
                              "containerPort":8080,
                              "protocol":"TCP"
                           }
                        ],
                        "env":[
                           {
                              "name":"SAMPLE_APP_VERSION",
                              "value":"${SAMPLE_APP_VERSION}"
                           },
                           {
                              "name":"APP_SERVER_HOST",
                              "value":"${APP_SERVER_HOST}"
                           },
                           {
                              "name":"APP_SERVER_PORT",
                              "value":"${APP_SERVER_PORT}"
                           }
                        ],
                        "resources":{

                        },
                        "terminationMessagePath":"/dev/termination-log",
                        "imagePullPolicy":"IfNotPresent",
                        "capabilities":{

                        },
                        "securityContext":{
                           "capabilities":{

                           },
                           "privileged":false
                        }
                     }
                  ],
                  "restartPolicy":"Always",
                  "dnsPolicy":"ClusterFirst",
                  "serviceAccount":""
               }
            }
         },
         "status":{

         }
      }
   ],
   "parameters":[
      {
         "name":"SAMPLE_APP_VERSION",
         "description":"App Version",
         "value":"0.1"
      },
	  {
	     "name":"APP_SERVICE_NAME",
	     "value":"sample-webapp"
	  },
      {
         "name":"APP_SERVER_HOST",
         "value":"localhost"
      },
      {
         "name":"APP_SERVER_PORT",
         "value":"8081"
      }
   ],
   "labels":{
      "template":"sample-web-application-template-dockerbuild"
   }
}

{
   "kind":"Template",
   "apiVersion":"v1",
   "metadata":{
      "name":"sample-webapp-template",
      "creationTimestamp":null,
      "annotations":{
         "description":"This example shows how to create a sample application in openshift origin v3"
      }
   },
   "objects":[
      {
         "kind":"Service",
         "apiVersion":"v1",
         "metadata":{
            "name":"${APP_SERVICE_NAME}",
            "creationTimestamp":null
         },
         "spec":{
            "ports":[
               {
                  "name":"sample-app-http",
                  "protocol":"TCP",
                  "port":5433,
                  "targetPort":8081,
                  "nodePort":0
               }
            ],
            "selector":{
               "name":"${APP_SERVICE_NAME}"
            },
            "portalIP":"",
            "type":"ClusterIP",
            "sessionAffinity":"None"
         },
         "status":{
            "loadBalancer":{

            }
         }
      },
      {
         "kind":"ImageStream",
         "apiVersion":"v1",
         "metadata":{
            "name":"sample-app",
			"annotations": {
				"openshift.io/image.insecureRepository": "true"
			},
            "creationTimestamp":null
         },
         "spec":{
             "dockerImageRepository":"${OSE_PRIVATE_REG}/${APP_PROJECT_NAME}/sample-app"
         }
      },
      {
         "kind":"DeploymentConfig",
         "apiVersion":"v1",
         "metadata":{
            "name":"sample-app-deployment",
            "creationTimestamp":null
         },
         "spec":{
            "strategy":{
               "type":"Rolling",
               "rollingParams":{
                  "updatePeriodSeconds":1,
                  "intervalSeconds":1,
                  "timeoutSeconds":120
               },
               "resources":{

               }
            },
            "triggers":[
               {
                  "type":"ImageChange",
                  "imageChangeParams":{
                     "automatic":true,
                     "containerNames":[
                        "sample-app-container"
                     ],
                     "from":{
                        "kind":"ImageStreamTag",
                        "name":"sample-app:${APP_IMAGE_TAG}"
                     },
                     "lastTriggeredImage":""
                  }
               },
               {
                  "type":"ConfigChange"
               }
            ],
            "replicas":1,
            "selector":{
               "name":"${APP_SERVICE_NAME}"
            },
            "template":{
               "metadata":{
                  "creationTimestamp":null,
                  "labels":{
                     "name":"${APP_SERVICE_NAME}"
                  }
               },
               "spec":{
                  "containers":[
                     {
                        "name":"sample-app-container",
                        "image":"${OSE_PRIVATE_REG}/${APP_PROJECT_NAME}/sample-app:${APP_IMAGE_TAG}",
                        "ports":[
                           {
                              "containerPort":8081,
                              "protocol":"TCP"
                           }
                        ],
                        "env":[
                           {
                              "name":"SAMPLE_APP_VERSION",
                              "value":"${SAMPLE_APP_VERSION}"
                           },
                           {
                               "name":"LOG_FORWARD_HOST",
                              "value":"${LOG_FORWARD_HOST}"
                           },
                           {
                              "name":"ES_INDEX",
                              "value":"${ES_INDEX}"
                           },
                           {
                              "name":"LOG_SHIPPER_TAG",
                              "value":"${LOG_SHIPPER_TAG}"
                           }
                        ],
                        "resources":{

                        },
                        "terminationMessagePath":"/dev/termination-log",
                        "imagePullPolicy":"Always",
                        "capabilities":{

                        },
                        "securityContext":{
                           "capabilities":{

                           },
                           "privileged":false
                        }
                     }
                  ],
                  "restartPolicy":"Always",
                  "dnsPolicy":"ClusterFirst",
                  "serviceAccount":""
               }
            }
         },
         "status":{

         }
      }
   ],
   "parameters":[
      {
         "name":"SAMPLE_APP_VERSION",
         "description":"App Version",
         "value":"0.1"
      },
	  {
	     "name":"APP_SERVICE_NAME",
	     "value":"sample-app"
	  },
	  {
	     "name":"APP_PROJECT_NAME",
	     "value":"sampleapp"
	  },
	  {
	     "name":"DOCKER_PULL_REG",
	     "value":"isl-dsdc.ca.com:5000"
	  },
	  {
	     "name":"OSE_PRIVATE_REG",
	     "value":"172.30.56.32:5000"
	  },
	  {
	     "name":"APP_IMAGE_TAG",
	     "value":"latest"
	  },
	  {
	     "name":"LOG_FORWARD_HOST",
	     "value":"localhost"
	  },
	  {
	     "name":"ES_INDEX",
	     "value":"sampleapp"
	  },
	  {
	     "name":"LOG_SHIPPER_TAG",
	     "value":"assignment"
	  }
   ],
   "labels":{
      "template":"sample-application-template-dockerbuild"
   }
}